<!doctype html>



 <html class="no-js" lang=""> 
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Harker Dev</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href=https://harkerdev.github.io/img/logo.png>

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Serif+Pro|Source+Sans+Pro:400,600" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" crossorigin="anonymous">

  <link rel="stylesheet" href=https://harkerdev.github.io/css/main.css>
  <link rel="stylesheet" href=https://harkerdev.github.io/css/syntax/syntax.css>
  <link rel="stylesheet" href=https://harkerdev.github.io/css/magnific-popup.css>
  
  



<html>
  <body lang="en">
  


  <div id="main">
    

<div id="nav">
  
  <a href="https://harkerdev.github.io/img/logo.png" class="image-link">
    <img class="logo animated flipInY" src="https://harkerdev.github.io/img/logo.png"/>
  </a>
  
  
  <ul>
    
      <li><a href="https://harkerdev.github.io/">
          <span>Home</span>
      </a></li>
    
      <li><a href="https://harkerdev.github.io/join/">
          <span>Join</span>
      </a></li>
    
      <li><a href="https://github.com/HarkerDev/">
          <span>GitHub</span>
      </a></li>
    
  </ul>

</div>

    <h1 class="animated flipInX"><a href="https://harkerdev.github.io/draft-backend/mongodb-backup/">MongoDB Backup</a></h1>
    <br>
    

<p>The more backups there are, the better. Thankfully, because of GitHub, we have multiple backups of the code in addition to the code on the server and on our own computers. However, MongoDB needs more work to set up for backups. This tutorial will guide you on how to make a backup procedure for MongoDB.</p>

<h2 id="local-backup">Local Backup</h2>

<p>A local backup is helpful because data can become corrupted or maliciously manipulated while in production. A local backup is a great tool for fixing this because the database can be restored from the local backup. However, this does not protect against total hard drive failure.</p>

<h3 id="creating-a-backup-script">Creating a Backup Script</h3>

<p>In your home folder, create a script titled <code>backup</code> by entering the following command:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">nano backup</code></pre></div>

<p>After creating the file, append the following commands to it (replace <code>&lt;database&gt;</code> with the database you are using):</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">NOW</span><span class="o">=</span><span class="k">$(</span>date +%Y-%m-%d_%H:%M:%S<span class="k">)</span>
mongodump -d &lt;database&gt; -o ~/backups/<span class="nv">$NOW</span>.mdb</code></pre></div>

<p>Then save the file (if using <code>nano</code> press control+x). Then, in your shell, give yourself permission to run it:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo chmod <span class="m">500</span> ~/backup</code></pre></div>

<p>To execute the script, run the following command:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">~/backup</code></pre></div>

<h3 id="scheduling-periodic-script-execution">Scheduling Periodic Script Execution</h3>

<p>Although the <code>backup</code> script can be run manually, it would be more efficient for the script to run automatically. To schedule a periodic execution of the script, first run the following command:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">crontab -e</code></pre></div>

<p>Then scroll your cursor to the bottom of the file. Add a new line after the comments (comments start with #). Once you add the line, save the file by pressing control+x. Different periods are defined below, but you can also read <a href="https://www.computerhope.com/unix/ucrontab.htm">this in-depth guide</a> on crontab.</p>

<h4 id="daily-execution">Daily Execution</h4>

<p>To add a daily execution at midnight, add the following line to the file (replace <code>&lt;userfolder&gt;</code> with your username):</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="m">0</span> <span class="m">0</span> * * * /home/&lt;userfolder&gt;/backup</code></pre></div>

<p><br></p>

<h4 id="weekly-execution">Weekly Execution</h4>

<p>To add a weekly execution on Sunday at midnight, add the following line to the file (replace <code>&lt;userfolder&gt;</code> with your username):</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="m">0</span> <span class="m">0</span> * * <span class="m">0</span> /home/&lt;userfolder&gt;/backup</code></pre></div>

<p><br><br></p>



    
  </div>

  



<div id="sidebar">
  
  <a href="https://harkerdev.github.io/">
    <img class="logo animated flipInY" src="https://harkerdev.github.io/img/logo.png"/>
  </a>
  

  <h2>Overview</h2>
  <ul>
    
      <li><a href="https://harkerdev.github.io/">Home</a></li>
    
      <li><a href="https://harkerdev.github.io/join/">Join</a></li>
    
      <li><a href="https://github.com/HarkerDev/">GitHub</a></li>
    
  </ul>

  <h2>Projects</h2>
  <ul>
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <li><a href="https://harkerdev.github.io/projects/bellschedule/">Bell Schedule</a></li>
      
    
      
        <li><a href="https://harkerdev.github.io/projects/courseplanner/">Course Planner</a></li>
      
    
      
        <li><a href="https://harkerdev.github.io/projects/gpa/">GPA Calculator</a></li>
      
    
      
        <li><a href="https://harkerdev.github.io/projects/lunchmenu/">Harker Lunch</a></li>
      
    
      
        <li><a href="https://harkerdev.github.io/projects/harkerpay/">Harker Pay</a></li>
      
    
      
    
  </ul>

  

  <h2>Organization</h2>
  <ul>
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  </ul>

  <h2>Front End</h2>
  <ul>
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  </ul>

  <h2>Back End</h2>
  <ul>
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  </ul>
  
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src=https://harkerdev.github.io/js/jquery-1.11.2.min.js></script>
  <script src=https://harkerdev.github.io/js/main.js></script>

  
  <script src=https://harkerdev.github.io/js/jquery.magnific-popup.min.js></script>

  
  

  
</body>
</html>

